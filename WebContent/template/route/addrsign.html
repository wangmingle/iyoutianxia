<!DOCTYPE html>
<html>
<head>
<meta/>
<title>爱游天下-iyoutianxia</title>
<meta name="description" content="Administry - Admin Template by www.865171.cn" />
<meta name="keywords" content="Admin,Template" />
<link rel="shortcut icon" type="image/png" HREF="../img/favicons/favicon.png"/>
<link rel="icon" type="image/png" HREF="../img/favicons/favicon.png"/>
<link rel="apple-touch-icon" HREF="../img/favicons/apple.png" />
<link rel="stylesheet" href="../css/style.css" type="text/css" />
<link rel="stylesheet" href="../css/custom.css" type="text/css" />
<script type="text/javascript" SRC="../js/swfobject.js"></script>
<script type="text/javascript" SRC="../js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" SRC="../js/jquery.tipTip.min.js"></script>
<script type="text/javascript" SRC="../js/jquery.superfish.min.js"></script>
<script type="text/javascript" SRC="../js/jquery.supersubs.min.js"></script>
<script type="text/javascript" SRC="../js/jquery.nyroModal.pack.js"></script>
<script type="text/javascript" SRC="../js/jquery.validate_pack.js"></script>
<script type="text/javascript" SRC="../js/jquery.tagInput.min.js"></script>
<script type="text/javascript" SRC="../js/jquery.wysiwyg.min.js"></script>

<link rel="stylesheet" href="../textext/css/textext.core.css" type="text/css" />
<link rel="stylesheet" href="../textext/css/textext.plugin.tags.css" type="text/css" />
<link rel="stylesheet" href="../textext/css/textext.plugin.autocomplete.css" type="text/css" />
<link rel="stylesheet" href="../textext/css/textext.plugin.focus.css" type="text/css" />
<link rel="stylesheet" href="../textext/css/textext.plugin.prompt.css" type="text/css" />
<link rel="stylesheet" href="../textext/css/textext.plugin.arrow.css" type="text/css" />
<script src="../textext/js/textext.core.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.tags.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.autocomplete.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.suggestions.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.filter.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.focus.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.prompt.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.ajax.js" type="text/javascript" charset="utf-8"></script>
<script src="../textext/js/textext.plugin.arrow.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" SRC="../xheditor/xheditor-1.1.14-zh-cn.js"></script>
<script type="text/javascript" SRC="../at/jquery.atwho.js"></script>
<script type="text/javascript" SRC="../at/jquery.caret.js"></script>
<link type="text/css" rel="stylesheet" href="../at/jquery.atwho.css"/>
<script type="text/javascript" SRC="../js/payfor.js"></script>
<script type="text/javascript" SRC="../My97DatePicker/WdatePicker.js"></script>

<script type="text/javascript" SRC="../js/jquery-ui-1.7.1.custom.min.js"></script>

<script type="text/javascript" SRC="../bsn/bsn.AutoSuggest_2.1.3_comp.js"></script>

<link rel="stylesheet" type="text/css" href="../bsn/autosuggest_inquisitor.css"/>

<script type="text/javascript" src="http://ditu.google.com/maps/api/js?sensor=false&language=zh-CN"></script>

<!-- Internet Explorer Fixes --> 
<!--[if IE]>
<link rel="stylesheet" type="text/css" media="all" href="../../css/ie.css"/>
<script src="../js/html5.js"></script>
<![endif]-->
<!--Upgrade MSIE5.5-7 to be compatible with MSIE8: http://ie7-js.googlecode.com/svn/version/2.1(beta3)/IE8.js -->
<!--[if lt IE 8]>
<script src="../../js/IE8.js"></script>
<![endif]-->
<style>
    .text-core .text-tag .text-button {
        padding-left : 22px !important;
    }

    .text-core .text-tag .custom-edit {
        display    : block;
        width      : 16px;
        height     : 16px;
        background : url(../textext/images/tag_blue.png);
        position   : absolute;
        left       : 2px;
        top        : 0px;
    }

    .text-core .text-tag .custom-edit:hover {
        background : url(../textext/images/tag_blue_edit.png);
    }
    
    .inputor {
	  height: 30px;
	  width: 710px;
	  border: 1px solid #dadada;
	  border-radius: 4px;
	  padding: 5px 8px;
	  outline: 0 none;
	  margin: 10px 0;
	  background: white;
	  font-size: inherit;
	}
	.inputor1 {
	  height: 60px;
	  width: 720px;
	  border: 1px solid #dadada;
	  border-radius: 4px;
	  padding: 5px 8px;
	  outline: 0 none;
	  margin: 10px 0;
	  background: white;
	  font-size: inherit;
	}
	
	.p_number{padding:0 0 0 0;width:400px;height:30px;}	
	.p_number .f_l{float:left;}
	.p_number .add_chose{width:105px;}
	.p_number .add_chose a{float:left;margin:5px 0 0 0;display:block;width:15px;height:15px;line-height:99em;overflow:hidden;background:url(../img/reduce-add.gif) no-repeat;}
	.p_number .add_chose a.reduce{background-position:0 0;}
	.p_number .add_chose a.reduce:hover{background-position:0 -16px;}
	.p_number .add_chose a.add{background-position:-16px 0;}
	.p_number .add_chose a.add:hover{background-position:-16px -16px;}
	.p_number .add_chose .text{float:left;margin:0 5px;display:inline;border:solid 1px #ccc;padding:4px 3px 4px 8px;width:40px;height:25px; line-height:18px;font-size:14px;color:#990000;font-weight:800;}
	.p_number .buy{line-height:2em;}
	.p_number .buy .total-font{font-family:Arial;font-size:26px;}
	.p_number .buy .jifen{margin-left:20px;color:#ACACAC;}
	.p_number .buy .jifen b{margin:0 3px;}


	
	
	#contentLeft {
		width: 300px;
	}
	
	#contentLeft li {
		list-style: none;
		height:20px;
		margin: 0 0 4px 0;
		padding: 10px;
		background-color:#00CCCC;
		border: #CCCCCC solid 1px;
		color:#fff;
	}
	
	
		
	
	#contentRight {
		width: 450px;
		height:450px;
		padding:10px;
		color:#FFFFFF;
	}

</style>


<script type="text/javascript">

/* sample tags */
var tags=[
	{tag:"js",freq:30},{tag:"jquery",freq:25}, {tag:"pojo",freq:10},{tag:"agile",freq:4},
	{tag:"blog",freq:3},{tag:"canvas",freq:8}, {tag:"dialog",freq:3},{tag:"excel",freq:4},
	{tag:"engine",freq:5},{tag:"flex",freq:18}, {tag:"firefox",freq:23},{tag:"javascript",freq:40},
	{tag:"graph",freq:15},{tag:"grid",freq:20}, {tag:"hibernate",freq:13},{tag:"ical",freq:4},
	{tag:"ldap",freq:9},{tag:"load",freq:20}, {tag:"security",freq:13},{tag:"XSS",freq:21},
	{tag:"CSRF",freq:19},{tag:"html",freq:22}, {tag:"xml",freq:13},{tag:"tools",freq:21}
];

$(document).ready(function(){
	$(function() {
		$("#contentLeft ul").sortable({ opacity: 0.6, cursor: 'move', update: function() {
			var order = $(this).sortable("serialize") + '&action=updateRecordsListings'; 
			//alert(order);
			//$.post("updateDB.php", order, function(theResponse){
			//	$("#contentRight").html(theResponse);
			//}); 		
			setTimeout("xyarray()",500);
		}								  
		});
	});
	/* setup navigation, content boxes, etc... */
	Administry.setup();
	
	$('#productdesc').wysiwyg({
    controls: {
      strikeThrough : { visible : true },
      underline     : { visible : true },
      
      justifyLeft   : { visible : true },
      justifyCenter : { visible : true },
      justifyRight  : { visible : true },
      justifyFull   : { visible : true },
      
      indent  : { visible : true },
      outdent : { visible : true },
      
      subscript   : { visible : true },
      superscript : { visible : true },
      
      undo : { visible : true },
      redo : { visible : true },
      
      insertOrderedList    : { visible : true },
      insertUnorderedList  : { visible : true },
      insertHorizontalRule : { visible : true },

      h4: {
              visible: true,
              className: 'h4',
              command: $.browser.msie ? 'formatBlock' : 'heading',
              arguments: [$.browser.msie ? '<h4>' : 'h4'],
              tags: ['h4'],
              tooltip: 'Header 4'
      },
      h5: {
              visible: true,
              className: 'h5',
              command: $.browser.msie ? 'formatBlock' : 'heading',
              arguments: [$.browser.msie ? '<h5>' : 'h5'],
              tags: ['h5'],
              tooltip: 'Header 5'
      },
      h6: {
              visible: true,
              className: 'h6',
              command: $.browser.msie ? 'formatBlock' : 'heading',
              arguments: [$.browser.msie ? '<h6>' : 'h6'],
              tags: ['h6'],
              tooltip: 'Header 6'
      },
      
      cut   : { visible : true },
      copy  : { visible : true },
      paste : { visible : true },
      html  : { visible: true }
    }
  }); 
  
	/* tag input field */
	$("#tagss").tagInput({
		tags:tags,
		//jsonUrl:"tags.json",
		sortBy:"frequency",
		suggestedTags:["jquery", "tagging", "tag", "component", "delicious", "javascript"],
		tagSeparator:" ",
		autoFilter:true,
		autoStart:false,
		//suggestedTagsPlaceHolder:$("#suggested"),
		boldify:true
	});


});
</script>
</head>
<body onload="initialize()">
	<!-- Header -->
	<!-- #include /header.html -->
	<!-- End of Header -->
	<!-- Page title -->
	<div id="pagetitle">
		<div class="wrapper">
			<h1><!-- 社区 &rarr; <span>游记</span> -->行程</h1>
			<!-- Quick search box -->
			<form action="" method="get"><input class="" type="text" id="q" name="q" /></form>
		</div>
	</div>
	<!-- End of Page title -->
	
	<!-- Page content -->
	<div id="page">
		<!-- Wrapper -->
		<div class="wrapper">
				<!-- Left column/section -->
				<section class="column width6 first" style="height:550px;width:450px;">					
					<form id="sampleform" method="post" action="areasign">
						<fieldset>
							<input type="hidden" id="lat" value="" name="lat" />
							<input type="hidden" id="lng" value="" name="lng" />
							<input type="hidden" id="addr" value="" name="addr" />
							<p>
								<input type="text" id="name" class="half title" style="width:350px;" value="" name="name" />
								<a href="javascript: //;" onclick="ggg()" class="btn">搜&nbsp;&nbsp;&nbsp;索</a>
							</p>
							<p>
								<label class="required" for="producttitle">标记类型</label>
								<select id="stype" class="full" name="stype" onchange="ctype(this)">
									<option value="country" selected>国家</option>
									<option value="city">省/市</option>
									<option value="attractions">景点</option>
									<option value="food">美食</option>
									<option value="shopping">购物</option>
									<option value="activity">活动</option>
									<option value="traffic">交通</option>
									<option value="others">其他</option>
								</select>
							</p>
							<p id="scontinent" style="display: block;">
								<label class="required" for="producttitle">所属大洲</label>
								<select id="continent" class="full" name="continent">
									<option value="asia" selected>亚洲 Asia</option>
									<option value="europe">欧洲 Europe</option>
									<option value="africa">非洲 Africa</option>
									<option value="northamerica">北美 North America</option>
									<option value="southamerica">南美 South America</option>
									<option value="oceania">大洋洲 Oceania</option>
									<option value="antarctica">南极洲 Antarctica</option>
								</select>
							</p>
							<p id="scountry" style="display: none;">
								<label class="required" for="country">所属国家</label>
								<input type="hidden" id="country" value="" name="country" />
								<input type="text" id="countryname" class="half title" style="width:400px;" value="" name="countryname" />
							</p>
							<p id="scity" style="display: none">
								<label class="required" for="city">所属省/市</label>
								<input type="hidden" id="city" value="" name="city" />
								<input type="text" id="cityname" class="half title" style="width:400px;" value="" name="cityname" />
							</p>
							<p>
								<label class="required" for="fullname">全称</label><br>
								<input type="text" id="fullname" class="half title" style="width:400px;" value="" name="fullname" />
							</p>
							<p>
								<label class="required" for="ename">英文名称</label><br>
								<input type="text" id="ename" class="half title" style="width:400px;" value="" name="ename" />
							</p>
							<p>
								<label class="required" for="pyname">汉语拼音</label><br>
								<input type="text" id="pyname" class="half title" style="width:400px;" value="" name="pyname" />
							</p>
							
							<p>
								<label class="required" for="remark">描述</label><br>
								<textarea id="remark" class="medium half" style="height: 35px;resize:none;width: 400px;" rows="2" cols="200" name="remark"></textarea>
							</p>
							
							<p>
							
							<p class="box">
								<input type="button" onclick="javascript:document.getElementById('sampleform').submit();" class="btn btn-green big" value="下一步"/> 
								or <a href="#">取消</a>
							</p>

						</fieldset>

					</form>

				</section>
				<!-- End of Left column/section -->
				
				<!-- Right column/section -->
				<aside class="column width2" style="width:500px;height:440px;">
					<div class="content-box" style="width:500px;height:440px;">
						  <div id="my_canvas" style="width:500px;height:440px;"></div>
					</div>
				</aside>
				<!-- End of Right column/section -->
		</div>
		<!-- End of Wrapper -->
	</div>
	<!-- End of Page content -->
	<!-- Page footer -->
	<footer id="bottom">
		<div class="wrapper">
			<nav>
				<a href="#">Dashboard</a> &middot;
				<a href="#">Content</a> &middot;
				<a href="#">Reports</a> &middot;
				<a href="#">Users</a> &middot;
				<a href="#">Media</a> &middot;
				<a href="#">Events</a> &middot;
				<a href="#">Newsletter</a> &middot;
				<a href="#">Settings</a>
			</nav>
			<p>Copyright &copy; 2010 <b><a HREF="http://www.865171.cn" title="www.865171.cn">www.865171.cn</a></b> | Icons by <a HREF="http://www.865171.cn">865171.cn</a></p>
		</div>
	</footer>
	<!-- End of Page footer -->
	
	<!-- Animated footer -->
	<footer id="animated">
		<ul>
			<li><a href="#">Dashboard</a></li>
			<li><a href="#">Content</a></li>
			<li><a href="#">Reports</a></li>
			<li><a href="#">Users</a></li>
			<li><a href="#">Media</a></li>
			<li><a href="#">Events</a></li>
			<li><a href="#">Newsletter</a></li>
			<li><a href="#">Settings</a></li>
		</ul>
	</footer>
	<!-- End of Animated footer -->
	
	<!-- Scroll to top link -->
	<a href="#" id="totop">^ scroll to top</a>

<!-- User interface javascript load -->
<script type="text/javascript" SRC="../js/administry.js"></script>
<script type="text/javascript" SRC="../at/at.js"></script>
<script type="text/javascript">
	var options = {
		script: function (input) { return "http://localhost:8080/iyoutianxia/iytx/areajson?stype=country&input="+input },
		varname:"input",
		noresults:"没有找到该国家自定义添加",
		callback: function (obj) {
			document.getElementById('country').value=obj.id;
		}
	};
	var as_json = new bsn.AutoSuggest('countryname', options);
	var options1 = {
			script: function (input) { return "http://localhost:8080/iyoutianxia/iytx/areajson?stype=city&input="+input },
			varname:"input",
			noresults:"没有找到该省/市自定义添加",
			callback: function (obj) {
				alert(obj.latlng);
				document.getElementById('city').value=obj.id;
			}
		};
		var as_json1 = new bsn.AutoSuggest('cityname', options1);
</script>
<script type="text/javascript">
var geocoder;
var map;
var marker
function initialize() {
  geocoder = new google.maps.Geocoder();
    var myOptions = {
        zoom: 4,//缩放比例
        mapTypeId: google.maps.MapTypeId.ROADMAP //地图类型 ?MapTypeId.ROADMAP ?MapTypeId.SATELLITE ?MapTypeId.HYBRID ?MapTypeId.TERRAIN 

    }
    map = new google.maps.Map(document.getElementById("my_canvas"), myOptions);
    //dxy();
    var myLatlng = new google.maps.LatLng(34.2182610,108.9641420);
    map.setCenter(myLatlng);
    
    marker = new google.maps.Marker({
        position: myLatlng,
        map: map, 
        draggable:true
    });
    google.maps.event.addListener(marker, "dragend", function(event) {
	       document.getElementById("lat").value=marker.getPosition().lat();
	       document.getElementById("lng").value=marker.getPosition().lat();
	       document.getElementById("addr").value=marker.formatted_address;
	});
    placeMarker(myLatlng);
}
function placeMarker(location) {
    //根据经纬度获取地址
    if (geocoder) {
        geocoder.geocode({ 'location': location }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[0]) {
                	document.getElementById("lat").value=results[0].geometry.location.lat();
         	       	document.getElementById("lng").value=results[0].geometry.location.lng();
         	       	document.getElementById("addr").value=results[0].formatted_address;
                }
            } else {
                alert("Geocoder failed due to: " + status);
            }
        });
    }
}

function ggg(){
	marker.setMap(null);
	var addr=document.getElementById("name").value;
	document.getElementById("fullname").value=addr;
	geocoder.geocode({ 'address': addr }, function (results, status) { //地址解析
		alert(status);
        if (status == google.maps.GeocoderStatus.OK) {
        	var result=results[0].geometry.location;
            map.setCenter(result);//依据解析的经度纬度设置坐标居中
            placeMarker(results[0].geometry.location);
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable:true,
                //title:results[0].address_components[0].long_name,
                animation: google.maps.Animation.DROP //坐标动画效果
            });
            google.maps.event.addListener(marker, "dragend", function(event) {
	     	       placeMarker(event.latLng);
	     	});
            var infowindow = new google.maps.InfoWindow({
                content: "<span style='font-size:11px'>" + results[0].address_components[0].long_name + "<br></span>",
                pixelOffset:0, //坐标偏移量，一般不用修改
                position: results[0].geometry.location
            });
            infowindow.open(map, marker);//默认打开信息窗口。点击做伴弹出信息窗口
            google.maps.event.addListener(marker, 'click', function () { infowindow.open(map, marker); });
        } else {
            alert("未能解析该地址的原因: " + status);
        }
    });
}

function ctype(v){
	if(v.value=="country"){
		document.getElementById("scontinent").style.display="block";
		document.getElementById("scountry").style.display="none";
		document.getElementById("scity").style.display="none";
	}else if(v.value=="city"){
		document.getElementById("scontinent").style.display="none";
		document.getElementById("scountry").style.display="block";
		document.getElementById("scity").style.display="none";
	}else{
		document.getElementById("scontinent").style.display="none";
		document.getElementById("scountry").style.display="none";
		document.getElementById("scity").style.display="block";
	}
}
</script>
</body>
</html>